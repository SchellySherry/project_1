<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>minamiKKBNJ</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background: black;
      overflow: hidden;
    }
    video {
      width: 100%;
      height: 100%;
      object-fit: cover;
      background: black;
    }
    #fullscreen-btn {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 999;
      background: rgba(255,255,255,0.9);
      border: none;
      padding: 10px 15px;
      border-radius: 25px;
      font-size: 16px;
      cursor: pointer;
      font-weight: bold;
      transition: opacity 0.5s ease;
    }
    #fullscreen-btn.hidden {
      opacity: 0;
      pointer-events: none;
    }
  </style>
</head>
<body>
  <video id="player" autoplay muted playsinline></video>
  <button id="fullscreen-btn">⛶</button>

  <script>
    const videos = [
      "videos/001.mp4",
      "videos/002.mp4",
      "videos/003.mp4",
      "videos/004.mp4",
      "videos/005.mp4",
      "videos/006.mp4",
      "videos/007.mp4",
      "videos/008.mp4",
      "videos/009.mp4",
      "videos/010.mp4",
      "videos/011.mp4",
      "videos/012.mp4",
      "videos/013.mp4",
      "videos/014.mp4",
      "videos/015.mp4",
      "videos/016.mp4",
      "videos/017.mp4",
      "videos/018.mp4",
      "videos/019.mp4",
      "videos/020.mp4",
      "videos/021.mp4",
      "videos/022.mp4",
      "videos/023.mp4",
      "videos/024.mp4",
      "videos/025.mp4",
      "videos/026.mp4",
      "videos/027.mp4",
      "videos/028.mp4",
      "videos/029.mp4",
      "videos/030.mp4",
      "videos/031.mp4",
      "videos/032.mp4",
      "videos/033.mp4",
      "videos/034.mp4",
      "videos/035.mp4",
      "videos/036.mp4",
      "videos/037.mp4",
      "videos/038.mp4",
      "videos/039.mp4",
      "videos/040.mp4",
      "videos/041.mp4",
      "videos/042.mp4",
      "videos/043.mp4",
      "videos/044.mp4",
      "videos/045.mp4",
      "videos/046.mp4",
      "videos/047.mp4",
      "videos/048.mp4",
      "videos/049.mp4",
      "videos/050.mp4",
      "videos/051.mp4",
      "videos/052.mp4",
      "videos/053.mp4",
      "videos/054.mp4",
      "videos/055.mp4",
      "videos/056.mp4",
      "videos/057.mp4",
      "videos/058.mp4",
      "videos/059.mp4",
      "videos/060.mp4",
      "videos/061.mp4",
      "videos/062.mp4",
      "videos/063.mp4",
      "videos/064.mp4",
      "videos/065.mp4",
      "videos/066.mp4",
      "videos/067.mp4",
      "videos/068.mp4",
      "videos/069.mp4",
      "videos/070.mp4",
      "videos/071.mp4",
      "videos/072.mp4",
      "videos/073.mp4",
      "videos/074.mp4",
      "videos/075.mp4",
      "videos/076.mp4",
      "videos/077.mp4",
      "videos/078.mp4",
      "videos/079.mp4",
      "videos/080.mp4",
      "videos/081.mp4",
      "videos/082.mp4",
      "videos/083.mp4",
      "videos/084.mp4",
      "videos/085.mp4",
      "videos/086.mp4",
      "videos/087.mp4",
      "videos/088.mp4",
      "videos/089.mp4",
      "videos/090.mp4",
      "videos/091.mp4",
      "videos/092.mp4",
      "videos/093.mp4",
      "videos/094.mp4",
      "videos/095.mp4",
      "videos/096.mp4",
      "videos/097.mp4",
      "videos/098.mp4",
      "videos/099.mp4",
      "videos/100.mp4",
      "videos/101.mp4",
      "videos/102.mp4",
      "videos/103.mp4",
      "videos/104.mp4",
      "videos/105.mp4",
      "videos/106.mp4",
      "videos/107.mp4",
      "videos/108.mp4",
      "videos/109.mp4",
      "videos/110.mp4",
      "videos/111.mp4",
      "videos/112.mp4",
      "videos/113.mp4",
      "videos/114.mp4",
      "videos/115.mp4",
      "videos/116.mp4",
      "videos/117.mp4",
      "videos/118.mp4",
      "videos/119.mp4",
      "videos/120.mp4",
      "videos/121.mp4",
      "videos/122.mp4",
      "videos/123.mp4",
      "videos/124.mp4",
      "videos/125.mp4",
      "videos/126.mp4",
      "videos/127.mp4",
      "videos/128.mp4",
      "videos/129.mp4",
      "videos/130.mp4",
      "videos/131.mp4",
      "videos/132.mp4",
      "videos/133.mp4",
      "videos/134.mp4",
      "videos/135.mp4",
      "videos/136.mp4",
      "videos/137.mp4",
      "videos/138.mp4",
      "videos/139.mp4",
      "videos/140.mp4",
      "videos/141.mp4",
      "videos/142.mp4",
      "videos/143.mp4",
      "videos/144.mp4",
      "videos/145.mp4",
      "videos/146.mp4",
      "videos/147.mp4",
      "videos/148.mp4",
      "videos/149.mp4",
      "videos/150.mp4",
      "videos/151.mp4",
      "videos/152.mp4",
      "videos/153.mp4",
      "videos/154.mp4",
      "videos/155.mp4",
      "videos/156.mp4",
      "videos/157.mp4",
      "videos/158.mp4",
      "videos/159.mp4",
      "videos/160.mp4",
      "videos/161.mp4",
      "videos/162.mp4",
      "videos/163.mp4",
      "videos/164.mp4",
      "videos/165.mp4",
      "videos/166.mp4",
      "videos/167.mp4",
      "videos/168.mp4",
      "videos/169.mp4",
      "videos/170.mp4",
      "videos/171.mp4",
      "videos/172.mp4",
      "videos/173.mp4",
      "videos/174.mp4",
      "videos/175.mp4",
      "videos/176.mp4",
      "videos/177.mp4",
      "videos/178.mp4",
      "videos/179.mp4",
      "videos/180.mp4",
      "videos/181.mp4",
      "videos/182.mp4",
      "videos/183.mp4",
      "videos/184.mp4",
      "videos/185.mp4",
      "videos/186.mp4",
      "videos/187.mp4",
      "videos/188.mp4",
      "videos/189.mp4",
      "videos/190.mp4",
      "videos/191.mp4",
      "videos/192.mp4",
      "videos/193.mp4",
      "videos/194.mp4",
      "videos/195.mp4",
      "videos/196.mp4",
      "videos/197.mp4",
      "videos/198.mp4",
      "videos/199.mp4",
      "videos/200.mp4",
      "videos/201.mp4",
      "videos/202.mp4",
      "videos/203.mp4",
      "videos/204.mp4",
      "videos/205.mp4",
      "videos/206.mp4",
      "videos/207.mp4",
      "videos/208.mp4",
      "videos/209.mp4",
      "videos/210.mp4",
      "videos/211.mp4",
      "videos/212.mp4",
      "videos/213.mp4",
      "videos/214.mp4",
      "videos/215.mp4",
      "videos/216.mp4",
      "videos/217.mp4",
      "videos/218.mp4",
      "videos/219.mp4",
      "videos/220.mp4",
      "videos/221.mp4",
      "videos/222.mp4",
      "videos/223.mp4",
      "videos/224.mp4",
      "videos/225.mp4",
      "videos/226.mp4",
      "videos/227.mp4",
      "videos/228.mp4",
      "videos/229.mp4",
      "videos/230.mp4",
      "videos/231.mp4",
      "videos/232.mp4",
      "videos/233.mp4",
      "videos/234.mp4",
      "videos/235.mp4",
      "videos/236.mp4",
      "videos/237.mp4",
      "videos/238.mp4",
      "videos/239.mp4",
      "videos/240.mp4",
      "videos/241.mp4",
      "videos/242.mp4",
      "videos/243.mp4",
      "videos/244.mp4",
      "videos/245.mp4",
      "videos/246.mp4",
      "videos/247.mp4",
      "videos/248.mp4",
      "videos/249.mp4",
      "videos/250.mp4",
      "videos/251.mp4",
      "videos/252.mp4",
      "videos/253.mp4",
      "videos/254.mp4",
      "videos/255.mp4",
      "videos/256.mp4",
      "videos/257.mp4",
      "videos/258.mp4",
      "videos/259.mp4",
      "videos/260.mp4",
      "videos/261.mp4",
      "videos/262.mp4",
      "videos/263.mp4",
      "videos/264.mp4",
      "videos/265.mp4",
      "videos/266.mp4",
      "videos/267.mp4",
      "videos/268.mp4",
      "videos/269.mp4",
      "videos/270.mp4",
      "videos/271.mp4",
      "videos/272.mp4",
      "videos/273.mp4",
      "videos/274.mp4",
      "videos/275.mp4",
      "videos/276.mp4",
      "videos/277.mp4",
      "videos/278.mp4",
      "videos/279.mp4",
      "videos/280.mp4",
      "videos/281.mp4",
      "videos/282.mp4",
      "videos/283.mp4",
      "videos/284.mp4",
      "videos/285.mp4",
    ];

    const player = document.getElementById("player");
    const fullscreenBtn = document.getElementById("fullscreen-btn");

    let order = 1;          // +1 または -1（再生方向）
    let index = 0;          // 現在のインデックス
    let playedCount = 0;    // 現在のサイクルで何本再生したか

    // ランダムにサイクルを初期化
    function startNewCycle() {
      index = Math.floor(Math.random() * videos.length);
      order = Math.random() < 0.5 ? 1 : -1;
      playedCount = 0;
      playVideo();
    }

    // 指定された動画を再生
    function playVideo() {
      player.src = videos[index];
      player.play().catch(() => {
        player.muted = true;
        player.play().catch(()=>{});
      });
      playedCount++;
    }

    // 動画終了時の処理
    player.addEventListener("ended", () => {
      if (playedCount < videos.length) {
        // 次の動画へ（ラップ対応）
        index = (index + order + videos.length) % videos.length;
        playVideo();
      } else {
        // 一周したら新しいサイクル開始
        startNewCycle();
      }
    });

    // 初期再生
    window.onload = () => {
      startNewCycle();
    };

    // 初回クリックで音声ON
    document.body.addEventListener("click", () => {
      player.muted = false;
      player.play();
    }, { once: true });

    // フルスクリーンボタン
    fullscreenBtn.addEventListener("click", () => {
      if (!document.fullscreenElement) {
        document.documentElement.requestFullscreen();
        setTimeout(() => fullscreenBtn.classList.add("hidden"), 3000);
      } else {
        document.exitFullscreen();
        fullscreenBtn.classList.remove("hidden");
      }
    });

    // クリックでボタン再表示
    player.addEventListener("click", () => {
      fullscreenBtn.classList.remove("hidden");
    });
  </script>
</body>
</html>
